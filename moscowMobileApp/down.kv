#import MDLabel kivymd.uix.label  
<MySwip@MDSwiperItem>:
    RelativeLayout:

        FitImage:
            #source: "https://www.mos.ru/upload/newsfeed/afisha/imagesWRpb1x(3)(15).jpg"
            source:root.source
            radius: [25,]       
            
        MDBoxLayout:
            MDLabel:
                text: root.text
                theme_text_color: "Custom"
                text_color:.74,.169,.137,1
                halign: "center"
                font_style: "H5"
                size_hint_y: None
                height: self.texture_size[1]
                pos_hint: {"center_y": .1}
                opposite_colors: True
<MyItem@MDList>:
    TwoLineAvatarListItem:
        size_hint:None,None
        size:root.width,100
        MDBoxLayout:
            orientation: 'horizontal'
            pos_hint: {"center_x": .5,"center_y": .6}
            #padding: 10
        #text: "Мероприятие"
        #secondary_text: "Type"

        #ImageLeftWidget:
            FitImage:
                size_hint:None,None
                size: 125,100
                #source: "https://www.mos.ru/upload/newsfeed/afisha/imagesWRpb1x(3)(7).jpg"
                source:root.source
                radius: [10,]
            MDLabel:
                pos_hint_y:.5
                text:root.text
        
<MyTile@SmartTileWithLabel>
    size_hint_y: None
    height: "160dp"
    radius: [25,]
    

<ClickableText>:
    size_hint_y: None
    height: text_field.height
    MDTextFieldRound:
        id:text_field
        hint_text: "Поиск"
        text: root.text
        color_mode: 'custom'
        normal_color: 0,0,0,0
        color_active: 1, 1, 1, .2
        line_color_focus: .74,.169,.137,1
    MDIconButton:
        icon: "search.png"
        ripple_scale: .5
        pos_hint: {"center_y": .5}
        pos: text_field.width - self.width + dp(9.9), 0
        on_release: 
            app.Poisc(text_field.text)
            root.current="poisc"  
<One_Screen>:
    
    MDScreen:
        name: "scr1"
        #on_start:root.start(swip)
        on_enter: root.start(swip)
        MDBottomNavigation:
            panel_color: .2, .2, .2, 0.1
            
            halign: 'start'
            MDBottomNavigationItem:
                name: 'screen 1'
                text: 'Мероприятия'
                icon: 'toolbar.png'

                MDScreen:
                    id: main_screen
                    size_hint: 1,1
                    name: "MainScreen"
                    MDBoxLayout: 
                        orientation: 'vertical'
                        MDToolbar:
                            id: toolbar_top
                            md_bg_color: 1,1,1,1
                            pos_hint: {"top": 1}
                            elevation: 5
                            title: "Мероприятия"
                            specific_text_color: .74,.169,.137,1
                            title_font_name: "JetBrainsMono-ExtraBold-Italic.ttf" #Чтобы изменить шрифт
                        MDBoxLayout:
                            orientation: 'horizontal'
                            padding: 30,30
                            spacing: 30
                            ClickableText:
                                id: poisk
                                size_hint_x: None
                                width: root.width*0.7
                                pos_hint: {"center_x": .5,"center_y": 1}
                                hint_text: "Поиск"
                                

                            MDIconButton:
                                id: but
                                icon: "calend.png"
                                user_font_size: dp(20)
                                pos_hint: {"center_x": .8,"center_y": 1}
                                on_release: app.show_date_picker()
                                

                            
                    MDBoxLayout: 
                        orientation: 'vertical'
                        pos_hint_y: {"center_y": root.height*0.5}
                        MDGridLayout:
                            rows: 4
                            padding: 5
                            size_hint: 1, .8 
                            pos_hint_x: {"center_x": root.width*0.5}
                            row_default_height: root.height * 0.2 
                            BoxLayout:
                                orientation:'horizontal'
                                size_hint:None,None
                                size:root.width ,root.height * 0.1
                                
                                MDFlatButton:
                                    text: "Поблизости"
                                    pos_hint_x: {"center_x": .4}
                                    theme_text_color: "Custom"
                                    text_color: .74,.169,.137,1
                                    on_release: root.near(swip)
                                MDFlatButton:
                                    text: "Популярно"
                                    pos_hint_x: {"center_x": .8}
                                    theme_text_color: "Custom"
                                    text_color: .74,.169,.137,1
                                    on_release: root.pop(swip)
                            MDSwiper:
                                id:swip
                                size_hint:None,None
                                size:root.width ,root.height * 0.25
                                pos_hint_x: {"center_x": .5}
                                #items_spacing: dp(20)                                
                                width_mult: dp(5)
                                #on_swipe: self.get_current_item().ids.icon.shake()
                                #height: root.height  *0.2
                                MySwip:
                                    source:"https://www.mos.ru//upload/newsfeed/events/imagesWRpb1x(3).jpg"
                                    text:"Мюзикл"
                                MySwip:
                                    source:"https://www.mos.ru//upload/newsfeed/afisha/mk_etudi(2).jpg"
                                    text:"Балет"
                                MySwip:
                                    source:"https://www.mos.ru//upload/newsfeed/afisha/rQGxQ44EOy93(15).jpg"
                                    text:"Музей"
                                MySwip:
                                    source:"https://www.mos.ru//upload/newsfeed/afisha/imageseTAzUl(4).jpg"
                                    text:"Экскурсия"

                            MDBoxLayout: 
                                orientation:'vertical' 
                                size_hint:None,None
                                size:root.width*0.9,root.height * 0.4
                                pos_hint_x: None
                                pos_x:root.width*0.5
                                ScrollView:

                                    MDList:
                                        id:list
                                        padding: [0, 20, 5, 5]
                                        
                                        MyItem:
                                            source:"https://www.mos.ru//upload/newsfeed/afisha/mk-bibliopiknik(16).jpg"
                                            text:"   Экскурсия"
                                        MyItem:
                                            source:"https://www.mos.ru//upload/newsfeed/afisha/imageseTAzUl(4).jpg"
                                            text:"   Экскурсия"
                                        MyItem:
                                            source:"https://www.mos.ru//upload/newsfeed/afisha/imagesuQIrku(3).jpg"
                                            text:"   Экскурсия"
                                          
                            MDFloatLayout:  
                                pos_hint_x: root.width * 0.5
                                #size_hint:None,None
                                size:root.width * 0.15,root.height * 0.1
                                MDIconButton:
                                    icon: "catalog.png"
                                    user_font_size: dp(20)
                                    text:"Каталог"
                                    pos_hint:{"center_x":.5,"center_":.5}
                                    on_release: root.current="catalog"
                            



    MDScreen:
        name: "catalog"
        size_hint:1,1
        MDToolbar:
            id: toolbar_top
            md_bg_color: 1,1,1,1
            pos_hint: {"top": 1}
            elevation: 5
            title: "Мероприятия"
            specific_text_color: .74,.169,.137,1
            title_font_name: "JetBrainsMono-ExtraBold-Italic.ttf" #Чтобы изменить шрифт
            MDIconButton:
                icon: "keyboard-backspace"
                icon_color: .74,.169,.137,1
                on_release: root.current="scr1"
        MDBoxLayout:
            orientation: 'horizontal'
            size_hint_y: .9
            ScrollView:

                MDGridLayout:
                    rows:3
                    adaptive_height: True
                    padding: dp(4), dp(4)
                    spacing: dp(4)
                    MDGridLayout:
                        cols: 2
                        adaptive_height: True
                        padding: dp(4), dp(4)
                        spacing: dp(4)
                        MyTile:
                            id:q1
                            text: "[size=0][color=#ffffff]На открытом пространстве[/color][/size]"
                            tile_text_color: app.theme_cls.accent_color
                            
                            source: "air.png"
                            on_release: 
                                root.on_search(q1.text)
                                root.current="poisc"    
                        MyTile:
                            id:q2
                            text: "[size=0][color=#ffffff]В помещениях[/color][/size]"
                            #tile_text_color: app.theme_cls.accent_color
                            source: "room.png"
                            on_release: 
                                root.on_search(q2.text)
                                root.current="poisc"    
                    MDGridLayout:
                        cols: 2
                        adaptive_height: True
                        padding: dp(4), dp(4)
                        spacing: dp(4)
                        MyTile:
                            id:q3
                            text: "[size=0][color=#ffffff]Для детей[/color][/size]"
                            tile_text_color: app.theme_cls.accent_color
                            
                            source: "child.png"
                            on_release: 
                                root.on_search(q3.text)
                                root.current="poisc"  
                            #MDLabel:
                            #    halign: "center"
                            #   pos_hint_y: root.width-self.width
                            #    text:"hfjf"     
                        MyTile:
                            id:q4
                            text: "[size=0][color=#ffffff]ограниченые возможности[/color][/size]"
                            tile_text_color: app.theme_cls.accent_color
                            source: "ogr.png"
                            on_release: 
                                root.on_search(q4.text)
                                root.current="poisc"      
                    MDGridLayout:
                        cols: 2
                        adaptive_height: True
                        padding: dp(4), dp(4)
                        spacing: dp(4)
                        MyTile:
                            id:q5
                            text: "[size=0][color=#ffffff]бесплатно[/color][/size]"
                            tile_text_color: app.theme_cls.accent_color
                            
                            source: "free.png" 
                            on_release: 
                                root.on_search(q5.text)
                                root.current="poisc"     
                        MyTile:
                            id:q6
                            text: "[size=0][color=#ffffff]Открытое пространство[/color][/size]"
                            tile_text_color: app.theme_cls.accent_color
                            source: "air.png"
                            on_release: 
                                root.on_search(q6.text)
                                root.current="poisc"   
                                

    MDScreen:
        size_hint: 1,1
        name: "poisc"
        #on_enter: root.Poisc()
        MDBoxLayout: 
            orientation: 'vertical'
            MDToolbar:
                id: toolbar_top
                md_bg_color: 1,1,1,1
                pos_hint: {"top": 1}
                elevation: 5
                title: "Мероприятия"
                specific_text_color: .74,.169,.137,1
                title_font_name: "JetBrainsMono-ExtraBold-Italic.ttf" #Чтобы изменить шрифт
                MDIconButton:
                    icon: "keyboard-backspace"
                    icon_color: .74,.169,.137,1
                    on_release: root.current="catalog"
            MDBoxLayout:
                orientation: 'horizontal'
                padding: 30,30
                spacing: 30
                ClickableText:
                    id: poisk2
                    size_hint_x: None
                    width: root.width*0.7
                    pos_hint: {"center_x": .5,"center_y": 1}
                
                MDIconButton:
                    id: but
                    icon: "calend.png"
                    user_font_size: dp(20)
                    pos_hint: {"center_x": .8,"center_y": 1}
                MDBoxLayout: 
                    orientation:'vertical' 
                    size_hint:None,None
                    size:root.width*0.9,root.height * 0.4
                    pos_hint_x: None
                    pos_x:root.width*0.5
                    ScrollView:

                        MDList:
                            id:list2
                            padding: [0, 20, 5, 5]
                            
                            #MyItem:
                            #    source:"https://www.mos.ru//upload/newsfeed/afisha/mk-bibliopiknik(16).jpg"
                            #MyItem:
                            #    source:"https://www.mos.ru//upload/newsfeed/afisha/imageseTAzUl(4).jpg"
                            #MyItem:
                            #    source:"https://www.mos.ru//upload/newsfeed/afisha/imagesuQIrku(3).jpg"                

                            